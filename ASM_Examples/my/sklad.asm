SKLADI	START 0
	
	JSUB STACKINIT
	LDX #0
	LDT #1
	SUBR T,X
	TIX #LENGTH
	JEQ HALT	
		
LOOP	LDCH INPUT,X
	JSUB FKTORA
	JSUB ECHONUM	
	LDA NEWLN
	WD OUTPUT
	TIX #LENGTH
	JLT LOOP	
	
HALT	J HALT

NEWLN	WORD X'00000a'	
INPUT	BYTE 2
	BYTE 10
	BYTE 5
	BYTE 7
	BYTE 14
END	EQU *
LENGTH	EQU END-INPUT
OUTPUT	BYTE 1


FKTORA	STL @STACKPTR
	JSUB STACKPUSH
	
	COMP #2
	JLT BAILOUT

	STA @STACKPTR
	JSUB STACKPUSH

	SUB #1	
	JSUB FKTORA
	STA TEMP	
	
	JSUB STACKPOP
	LDA @STACKPTR
	
	MUL TEMP
		
BAILOUT	JSUB STACKPOP
	LDL @STACKPTR
	RSUB
	



STACKINIT	STA TEMP
	LDA #STACK
	STA STACKPTR
	LDA TEMP
	RSUB

STACKPUSH	STA TEMP
	LDA STACKPTR
	ADD #3
	STA STACKPTR
	LDA TEMP
	RSUB	

STACKPOP	STA TEMP
	LDA STACKPTR
	SUB #3
	STA STACKPTR
	LDA TEMP
	RSUB

.SKLAD
STACK	RESW 1000
STACKPTR	RESW 1
.OSTALO
TEMP	RESW 1

.FUNKCIJA ZA IZPIS V DESETISKEMU STEVLU
ECHONUM	STA NUM
	STA REGSTA
	STS REGSTS
	STT REGSTT
	STX REGSTX
	LDS #0
	LDX #0

LOO	LDT NUM
	LDA NUM
	COMPR T,S
	JEQ IZPIS
	DIV #10
	MUL #10
	SUBR A,T
	DIV #10
	STA NUM
	LDA #0
	ADDR T,A
	STCH BUFFER,X
	TIX #0
	J LOO
	
IZPIS	LDT #1
	SUBR T,X

IZLOOP	SUBR T,X
	TIX #0
	JLT EXIT
	LDCH BUFFER,X
	ADD #48
	WD OUTPUT
	SUB #48	
	SUBR T,X
	J IZLOOP
EXIT	LDA REGSTA
	LDS REGSTS
	LDT REGSTT
	LDX REGSTX	
	
	RSUB		


NUM	RESW 1
BUFFER 	RESW 100
REGSTS	RESW 1
REGSTT	RESW 1
REGSTX	RESW 1
REGSTA	RESW 1


	END SKLADI
	
	
